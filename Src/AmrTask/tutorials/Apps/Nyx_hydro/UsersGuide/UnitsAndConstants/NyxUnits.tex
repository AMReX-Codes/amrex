\section{Units and Constants}

We support two different systems of units in \nyx: CGS and Cosmological.
All inputs and problem initialization should be specified consistently with one of these sets of units.  
No internal conversions of units occur within the code, so the output must be interpreted appropriately. \\

\noindent The default is cosmological units. \\

\noindent If you want to use CGS units instead, then set \\

\noindent USE\_CGS = TRUE  \\

\noindent in your GNUmakefile.  This will select the file
{\tt constants\_cgs.f90}  instead of {\tt constants\_cosmo.f90} from the
{\tt Nyx/constants} directory. 

\begin{table*}[h]
\begin{scriptsize}
\begin{center}
\begin{tabular}{|l|l|l|l|l|} \hline
          & & & & \\
Location & Variable & CGS & Cosmological & Conversion Data \\
          & & & & \\
\hline
          & & & & \\
inputs file             & {\bf geometry.prob\_lo}  & {\rm cm} 
                                                   & {\rm Mpc}   
                                                   &  1Mpc = 3.08568025e24 cm \\
                        & {\bf geometry.prob\_hi}  & {\rm cm} 
                                                   & {\rm Mpc} 
                                                   &  1Mpc = 3.08568025e24 cm \\
          & & & & \\ \hline 
          & & & & \\
Hydro Initialization    & density                                   & g         / cm$^3$   
                                                                    & M$_\odot$ / Mpc$^3$  
                                                                    & 1 (M$_\odot$ / Mpc$^3$) = .06769624e-39 (g/cm$^3$) \\
          & & & & \\ \hline 
          & & & & \\
Hydro Initialization    & velocities                                & cm/s   
                                                                    & km/s    
                                                                    & 1km = 1.e5 cm   \\ 
          & & & & \\ \hline 
          & & & & \\
Hydro Initialization    & momenta                                   & (g/cm$^3$) (cm/s)   
                                                                    & (M$_\odot$/Mpc$^3$) (km/s)   
                                                                    & 1km = 1.e5 cm   \\ 
          & & & &  1 (M$_\odot$ / Mpc$^3$) = .06769624e-39 g/cm$^3$  \\ 
          & & & & \\ \hline 
          & & & & \\
Hydro Initialization    & temperature                               & K           
                                                                    & K             
                                                                    & 1             \\ 
          & & & & \\ \hline 
          & & & & \\
Hydro Initialization    & specific energy ($e$ or $E$)              & erg/g= (cm/s)$^2$         
                                                                    & (km/s)$^2$
                                                                    & 1 (km/s)$^2$ = 1.e10 (cm/s)$^2$ \\   
          & & & & \\ \hline 
          & & & & \\
Hydro Initialization    & energy ($\rho e$ or $\rho E$)             & erg / cm$^3 = $ 
                                                                    & (M$_\odot$/Mpc$^3$) (km/s)$^2$ 
                                                                    &  1 (km/s)$^2$ = 1.e10 (cm/s)$^2$ \\   
          & & (g/cm$^3$) (cm/s)$^2$  & &  1 (M$_\odot$ / Mpc$^3$) = .06769624e-39 g/cm$^3$  \\
          & & & & \\ \hline 
          & & & & \\
Particle Initialization & particle mass                             & g   
                                                                    & M$_\odot$      
                                                                    & 1 M$_\odot$ = 1.98892e33 g  \\   
          & & & & \\ \hline 
          & & & & \\
Particle Initialization & particle locations                        & {\rm cm}           
                                                                    & {\rm Mpc}          
                                                                    & 1 Mpc = 3.08568025e24 cm  \\
          & & & & \\ \hline 
          & & & & \\
Particle Initialization & particle velocities                       & cm/s 
                                                                    & km/s  
                                                                    & 1 km = 1e5 cm \\
          & & & & \\ \hline 
          & & & & \\
Output            & Pressure                                        &  g (cm/s)$^2$ / cm$^3$
                                                                    &  M$_\odot$ (km/s)$^2$ / Mpc$^3$
                                                                    & 1 M$_\odot$ (km/s)$^2$ / Mpc$^3$ =  \\
                                                           &  &  &  &  .06769624e-29 g (cm/s)$^2$ / cm$^3$ \\
          & & & & \\ \hline 
          & & & & \\
Output            & Gravity                                         &  (cm/s) / s
                                                                    &  (km/s)$^2$ / Mpc
                                                                    & 1 M$_\odot$ (km/s)$^2$ / Mpc$^3$ =  \\
          & & & & \\ \hline 
          & & & & \\
Output            & Time                                            &  s
                                                                    &  (Mpc/km) s 
                                                                    &  1 Mpc = 3.08568025e19 km \\
          & & & & \\ \hline 
\end{tabular}
\label{Table:Units}
\caption{Units}
\end{center}
\end{scriptsize}
\end{table*}

\newpage

\begin{table*}[h]
\begin{scriptsize}
\begin{center}
\begin{tabular}{|l|l|l|l|} \hline
          & & & \\
Constant & CGS & Cosmological & Conversion Data \\
          & & & \\
\hline
          & & & \\
Gravitational constant ($G$)                   & 6.67428e-8  cm (cm/s)$^2$  g$^{-1}$  
                                               & 4.3019425e-9 Mpc (km/s)$^2$  M$_\odot^{-1}$          
                                               &  \\
          & & & \\ \hline 
          & & & \\
Avogadro's number ($n_A$)                      &  6.02214129e23  g$^{-1}$ 
                                               &  1.1977558e57   M$_\odot^{-1}$
                                               &  1  M$_\odot$ = 1.98892e33 g  \\   
          & & & \\ \hline 
          & & & \\
Boltzmann's constant ($k_B$)                   &  1.3806488e-16 erg / K
                                               &  0.6941701e-59 M$_\odot$ (km/s)$^2$ / K
                                               & 1 M$_\odot$ (km/s)$^2$ = 1.98892e43 g (cm/s)$^2$ \\   
          & & & \\ \hline 
          & & & \\
Hubble constant ($H$)                          &  100 (km/s) / Mpc
                                               &  32.407764868e-19 s$^{-1}$
                                               &  1 Mpc = 3.08568025e19 km \\
          & & & \\ \hline 
\end{tabular}
\label{Table:Constants}
\caption{Constants}
\end{center}
\end{scriptsize}
\end{table*}

\clearpage

The only other place that dimensional numbers are used in the code is in the tracing and Riemann solve.  
We set three {\it small} numbers which need to be consistent with the data specified.  
Each of these can be specified in the inputs file.

\begin{itemize}
\item small\_dens -- small value for density
\item small\_p -- small value for pressure
\item small\_T -- small value for temperature
\end{itemize}

These are the places that each is used in the code:

\begin{itemize}
\item {\bf small\_dens}  

\begin{itemize}
\item   {\bf subroutine enforce\_minimum\_density} (called after subroutine consup) -- if $\rho < $ small\_dens then $\rho$ is set to the 
minimum value of the 26 neighbors.  This also modifies momenta, $\rho E$ and $\rho e$ so that velocties, $E$ and $e$ remain unchanged. \\

\item   {\bf subroutine tracexy / tracez / tracexy\_ppm / tracez\_ppm}:  \\
qxp = max(qxp,small\_dens) \\
qxm = max(qxm,small\_dens) \\
and analogously for qyp/qym and qzp/qzm.  This only modifies density inside the tracing, not the other variables \\

\item   {\bf subroutine riemannus} -- we set 

\noindent wsmall = small\_dens * csmall

and then

\noindent wl = max(wsmall, sqrt(gaml * pl * rl)) \\
\noindent wr = max(wsmall, sqrt(gamr * pr * rr))

Also, we set 

\noindent ro = max(small\_dens,ro) 

\noindent where ro = 0.5 * (rl + rr)  -- this state is only chosen when ustar = 0, and

\noindent rstar = max(small\_dens,rstar) 

\noindent where rstar = ro + (pstar-po)/co$^2$

\item   {\bf subroutine react\_state} -- only compute reaction if $\rho >$ small\_dens
\end{itemize}

\item {\bf small\_temp}:  
\begin{itemize}
\item {\bf subroutine ctoprim}:  if $\rho e < 0$, then \\

 call subroutine nyx\_eos\_given\_RTX (e,...,small\_temp,...) in order to compute a new energy, $e$.  \\

 This energy is then used to  \\

 call subroutine nyx\_eos\_given\_ReX in order to compute the sound speed, $c.$ \\

Coming out of this the temperature is equal to small\_temp and the energy $e$ has been reset.

\item {\bf subroutine react\_state}:  if $\rho e < 0$, then \\

 call subroutine nyx\_eos\_given\_RTX (e,...,small\_temp,...) in order to compute a new energy, $e$.  \\

 This energy is then used to proceed with the burner routine. \\

\item {\bf subroutine reset\_internal\_energy}:  if $e < 0$ and $E - ke < 0$  then  \\

 call subroutine nyx\_eos\_given\_RTX (e,...,small\_temp,...) in order to compute a new energy, $e$.  This energy is also used to  \\

 define a new $E = e + ke$ 

\end{itemize}

\item {\bf small\_pres}:  
\begin{itemize}

\item   {\bf subroutine riemannus} -- we set 

pstar = max(small\_pres,pstar)  \\

pgdnv = max(small\_pres,pgdnv).  Note that pgdnv is the pressure explicitly used in the fluxes.

\item   {\bf subroutine uflaten} -- small\_pres is used to keep the denominator away from zero

\item   Everywhere we define values of pressure on a face, we set that value to be at least small\_pres.

\end{itemize}

\end{itemize}
